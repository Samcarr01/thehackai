@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Space+Grotesk:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Additional font loading optimization */
@layer base {
  html {
    font-family: 'Roboto', ui-sans-serif, system-ui, sans-serif;
  }
  
  .font-display, .font-headline {
    font-family: 'Space Grotesk', ui-sans-serif, system-ui, sans-serif;
  }
}

/* Premium Ultra card animations */
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

/* Professional Animated Border for Ultra Card */
.ultra-border, .ultra-border-glow {
  position: absolute;
  inset: 0;
  border-radius: 1rem;
  overflow: hidden;
  z-index: 0;
}

.ultra-border-animation::before {
  content: '';
  z-index: -2;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(0deg);
  width: 99999px;
  height: 99999px;
  background-repeat: no-repeat;
  background-position: 0 0;
  /* thehackai brand colors - pink to purple to cyan */
  background-image: conic-gradient(
    rgba(0,0,0,0), 
    #ff69b4, 
    #8b5cf6, 
    #00d4ff, 
    rgba(0,0,0,0) 30%
  );
  animation: ultra-rotate 4s linear infinite;
}

.ultra-border::after {
  content: '';
  position: absolute;
  z-index: -1;
  left: 2px;
  top: 2px;
  width: calc(100% - 4px);
  height: calc(100% - 4px);
  background: transparent;
  border-radius: calc(1rem - 2px);
}

@keyframes ultra-rotate {
  100% {
    transform: translate(-50%, -50%) rotate(1turn);
  }
}

/* STABLE BLOG IMAGES - Clean approach with React key stability */
.blog-image {
  min-height: 300px;
  background: linear-gradient(135deg, rgba(31, 41, 55, 0.5), rgba(75, 85, 99, 0.3));
  border-radius: 0.5rem;
  overflow: hidden;
  position: relative;
  aspect-ratio: 16/9;
  /* Minimal necessary containment */
  contain: layout;
}

.blog-image img {
  width: 100%;
  height: 100%;
  display: block;
  object-fit: cover;
  /* Basic stability without aggressive overrides */
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Additional CSS to prevent scroll-triggered repaints */
.blog-image img[src*="supabase"] {
  /* Extra stability for Supabase images */
  image-rendering: auto !important;
  will-change: auto !important;
}

.blog-image img[src*="oaidalleapiprodscus"] {
  /* Mark temporary URLs visually for debugging */
  border: 2px solid red !important;
  filter: sepia(0.2) !important;
}

@layer base {
  :root {
    /* Purple color palette */
    --purple-50: #faf5ff;
    --purple-100: #f3e8ff;
    --purple-200: #e9d5ff;
    --purple-300: #d8b4fe;
    --purple-400: #c084fc;
    --purple-500: #a855f7;
    --purple-600: #9333ea;
    --purple-700: #7e22ce;
    --purple-800: #6b21a8;
    --purple-900: #581c87;
    
    /* Neutral colors */
    --gray-50: #fafafa;
    --gray-100: #f4f4f5;
    --gray-200: #e4e4e7;
    --gray-300: #d4d4d8;
    --gray-400: #a1a1aa;
    --gray-500: #71717a;
    --gray-600: #52525b;
    --gray-700: #3f3f46;
    --gray-800: #27272a;
    --gray-900: #18181b;
    
    /* Typography */
    --font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    
    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgba(139, 92, 246, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(139, 92, 246, 0.1), 0 2px 4px -1px rgba(139, 92, 246, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(139, 92, 246, 0.1), 0 4px 6px -2px rgba(139, 92, 246, 0.05);
    --shadow-xl: 0 20px 25px -5px rgba(139, 92, 246, 0.1), 0 10px 10px -5px rgba(139, 92, 246, 0.04);
  }
}

@layer base {
  * {
    @apply border-gray-200;
  }
  
  /* Mobile full-bleed fix - eliminate white borders */
  html, body {
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
    height: 100% !important;
    min-height: 100vh !important;
    min-height: 100dvh !important; /* Dynamic viewport height for mobile */
    max-height: 100vh !important;
    max-height: 100dvh !important;
    overflow-x: hidden !important;
    background: #0f172a !important; /* Force dark slate background */
  }
  
  body {
    font-family: var(--font-sans);
    color: white !important;
    /* Remove any conflicting Tailwind background classes */
    background-color: #0f172a !important;
    background-image: none !important;
  }
  
  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }
  
  /* Mobile Safari viewport fix with environment variables */
  @supports (-webkit-touch-callout: none) {
    html {
      min-height: -webkit-fill-available !important;
      height: -webkit-fill-available !important;
      background: #0f172a !important;
    }
    
    body {
      min-height: -webkit-fill-available !important;
      height: -webkit-fill-available !important;
      background: #0f172a !important;
      /* Safe area padding for notched devices - but extend below UI */
      padding-top: env(safe-area-inset-top, 0);
      padding-bottom: 0 !important;
      margin-bottom: calc(-1 * env(safe-area-inset-bottom, 0)) !important; /* Extend behind bottom UI */
      padding-left: env(safe-area-inset-left, 0);
      padding-right: env(safe-area-inset-right, 0);
      /* Position behind browser UI */
      padding-bottom: 0 !important;
      margin-bottom: -50px !important; /* Force extension behind UI */
    }
  }
  
  /* Force dark background on all potential container elements */
  #__next, [data-reactroot] {
    background: #0f172a !important;
    min-height: 100vh !important;
    min-height: 100dvh !important;
  }
  
  /* NUCLEAR OPTION: Complete mobile bottom border elimination */
  @media screen and (max-width: 768px) {
    /* Force viewport to be exactly screen height */
    html {
      height: 100vh !important;
      height: 100dvh !important;
      max-height: 100vh !important;
      max-height: 100dvh !important;
    }
    
    body {
      height: 100vh !important;
      height: 100dvh !important;
      max-height: 100vh !important;
      max-height: 100dvh !important;
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      overflow-y: auto !important;
    }
  }

  /* Mobile browser UI transparency - like Star Citizen */
  @media screen and (max-width: 768px) {
    /* Extend background behind browser UI */
    html {
      background: #0f172a !important;
      background-attachment: fixed !important;
      height: 100% !important;
    }
    
    body {
      background: #0f172a !important;
      background-attachment: fixed !important;
      /* Completely eliminate bottom spacing */
      margin: 0 !important;
      padding: 0 !important;
      margin-bottom: 0 !important;
      padding-bottom: 0 !important;
      border: 0 !important;
      outline: 0 !important;
      height: 100% !important;
    }
    
    /* Make sure all containers extend full height with no bottom spacing */
    body > div:first-child,
    #__next,
    [data-reactroot] {
      min-height: 100vh !important;
      min-height: 100dvh !important;
      background: #0f172a !important;
      margin: 0 !important;
      padding: 0 !important;
      border: 0 !important;
      height: 100% !important;
    }
    
    /* Remove any potential bottom margins/padding from all elements */
    * {
      margin-bottom: 0 !important;
      padding-bottom: 0 !important;
    }
    
    /* Specifically target footer and last elements */
    footer,
    .footer,
    body > *:last-child,
    main:last-child {
      margin-bottom: 0 !important;
      padding-bottom: 0 !important;
      border-bottom: 0 !important;
    }
    
    /* Force viewport to extend to absolute bottom */
    html {
      overflow-y: auto !important;
      overflow-x: hidden !important;
    }
    
    /* Remove browser default spacing */
    body {
      -webkit-margin-before: 0 !important;
      -webkit-margin-after: 0 !important;
      -webkit-padding-start: 0 !important;
      -webkit-padding-end: 0 !important;
      margin-block-start: 0 !important;
      margin-block-end: 0 !important;
      padding-block-start: 0 !important;
      padding-block-end: 0 !important;
    }
  }
  
  /* Focus styles */
  *:focus {
    @apply outline-none ring-2 ring-purple-500 ring-offset-2;
  }
  
  /* Selection styles */
  ::selection {
    @apply bg-purple-200 text-purple-900;
  }
  
  /* Mobile-specific improvements */
  @media (max-width: 768px) {
    html {
      font-size: 16px; /* Prevent zoom on iOS */
    }
    
    /* Improve touch targets */
    button, a, input, select, textarea {
      min-height: 44px;
    }
    
    /* Better mobile text rendering */
    body {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }
  }
}

@layer components {
  /* Glass morphism effect - dark theme */
  .glass {
    @apply bg-slate-800/90 border-b border-purple-500/20;
  }
  
  @media (min-width: 768px) {
    .glass {
      @apply backdrop-blur-xl bg-slate-800/80 border-purple-500/20;
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
    }
  }
  
  /* Purple gradient backgrounds */
  .gradient-purple {
    @apply bg-gradient-to-br from-purple-500 to-purple-700;
  }
  
  .gradient-purple-light {
    @apply bg-gradient-to-br from-purple-400 to-purple-600;
  }
  
  .gradient-purple-subtle {
    @apply bg-gradient-to-br from-purple-50 to-purple-100;
  }
  
  /* Button hover effects */
  .button-hover {
    @apply transition-all duration-300 ease-out hover:scale-105 hover:shadow-lg;
  }
  
  /* Text gradient */
  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-purple-400;
  }
  
  /* Professional logo styling - removed dark filters */
  .logo-professional {
    transition: all 0.3s ease;
  }
  
  .logo-professional:hover {
    transform: scale(1.05);
    filter: drop-shadow(0 4px 8px rgba(124, 58, 237, 0.2));
  }
}

@layer utilities {
  /* NUCLEAR MOBILE NAVIGATION FIX - FORCE SOLID BACKGROUND */
  @media (max-width: 768px) {
    /* Remove ALL transparency effects from mobile navigation */
    .mobile-nav-panel,
    .mobile-nav-solid,
    [class*="mobile-nav"],
    .fixed.top-0.right-0 {
      background-color: #1a1a2e !important;
      background: #1a1a2e !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
      opacity: 1 !important;
      background-image: none !important;
      background-attachment: scroll !important;
    }
    
    /* Force solid on any mobile navigation elements */
    .md\\:hidden div[class*="flex"] {
      background-color: #1a1a2e !important;
      background: #1a1a2e !important;
    }
    
    /* Remove blur from overlays */
    .backdrop-blur-sm,
    .backdrop-blur,
    [class*="backdrop-blur"] {
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
    }
    
    /* Force opacity on all mobile nav elements */
    .md\\:hidden * {
      opacity: 1 !important;
    }
    
    /* Enhanced text contrast for solid background */
    .text-gray-200 {
      color: #f8fafc !important;
    }
    
    .text-gray-300 {
      color: #e2e8f0 !important;
    }
    
    .text-purple-400 {
      color: #c084fc !important;
    }
    
    .text-purple-300 {
      color: #d8b4fe !important;
    }
  }

  /* Custom animations */
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }
  
  @keyframes pulse-purple {
    0%, 100% { box-shadow: 0 0 0 0 rgba(168, 85, 247, 0.4); }
    50% { box-shadow: 0 0 0 10px rgba(168, 85, 247, 0); }
  }
  
  @keyframes cursor-blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }
  
  @keyframes cursor-glow {
    0% { 
      box-shadow: 0 0 5px rgba(168, 85, 247, 0.5);
      transform: scaleY(1);
    }
    100% { 
      box-shadow: 0 0 15px rgba(168, 85, 247, 0.8);
      transform: scaleY(1.1);
    }
  }
  
  .animate-float {
    animation: float 3s ease-in-out infinite;
  }
  
  .animate-pulse-purple {
    animation: pulse-purple 2s ease-in-out infinite;
  }
  
  /* 3D Transform utilities for flip animation */
  .perspective-1000 {
    perspective: 1000px;
  }
  
  .transform-style-preserve-3d {
    transform-style: preserve-3d;
  }
  
  .backface-hidden {
    backface-visibility: hidden;
  }
  
  .rotate-y-180 {
    transform: rotateY(180deg);
  }
  
  /* Line clamp utilities for text truncation */
  .line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }
  
  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }
  
  .line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
  }
  
  /* Beautiful 3D Card Flip Animations */
  @keyframes card-flip-to-back {
    0% {
      transform: rotateY(0deg) scale(1);
    }
    50% {
      transform: rotateY(-90deg) scale(1.05);
      box-shadow: 0 25px 50px rgba(139, 92, 246, 0.3);
    }
    100% {
      transform: rotateY(-180deg) scale(1);
    }
  }
  
  @keyframes card-flip-to-front {
    0% {
      transform: rotateY(-180deg) scale(1);
    }
    50% {
      transform: rotateY(-90deg) scale(1.05);
      box-shadow: 0 25px 50px rgba(139, 92, 246, 0.3);
    }
    100% {
      transform: rotateY(0deg) scale(1);
    }
  }
  
  .card-flip-container {
    perspective: 1200px;
    perspective-origin: center center;
  }
  
  .card-flip-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    transition: transform 0.8s cubic-bezier(0.23, 1, 0.320, 1);
    cursor: pointer;
  }
  
  .card-flip-inner:hover:not(.flipped) {
    transform: rotateY(5deg) rotateX(5deg) scale(1.02);
    box-shadow: 0 20px 40px rgba(139, 92, 246, 0.15);
  }
  
  .card-flip-inner.flipped {
    transform: rotateY(-180deg);
  }
  
  .card-flip-inner.flipping-to-back {
    animation: card-flip-to-back 0.8s cubic-bezier(0.23, 1, 0.320, 1) forwards;
  }
  
  .card-flip-inner.flipping-to-front {
    animation: card-flip-to-front 0.8s cubic-bezier(0.23, 1, 0.320, 1) forwards;
  }
  
  .card-face {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    border-radius: 1rem;
    overflow: hidden;
  }
  
  .card-face-front {
    transform: rotateY(0deg);
  }
  
  .card-face-back {
    transform: rotateY(-180deg);
  }
  
  /* Custom scrollbar for card content */
  .card-scrollable {
    scrollbar-width: thin;
    scrollbar-color: rgba(139, 92, 246, 0.3) transparent;
  }
  
  .card-scrollable::-webkit-scrollbar {
    width: 4px;
  }
  
  .card-scrollable::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .card-scrollable::-webkit-scrollbar-thumb {
    background: rgba(139, 92, 246, 0.3);
    border-radius: 2px;
  }
  
  .card-scrollable::-webkit-scrollbar-thumb:hover {
    background: rgba(139, 92, 246, 0.5);
  }
  
  /* Modal animations */
  @keyframes modal-fade-in {
    from {
      opacity: 0;
      backdrop-filter: blur(0px);
    }
    to {
      opacity: 1;
      backdrop-filter: blur(12px);
    }
  }
  
  @keyframes modal-zoom-in {
    from {
      transform: scale(0.95);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }
  
  .animate-in {
    animation-duration: 300ms;
    animation-fill-mode: both;
  }
  
  .fade-in {
    animation-name: modal-fade-in;
  }
  
  .zoom-in-95 {
    animation-name: modal-zoom-in;
  }
  
  /* Mobile optimization utilities */
  .mobile-optimized {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }
  
  .touch-action-manipulation {
    touch-action: manipulation;
  }

  /* Ultra-smooth animation utilities */
  .transform-gpu {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    perspective: 1000px;
    -webkit-perspective: 1000px;
  }

  .smooth-animation {
    will-change: transform, opacity;
    backface-visibility: hidden;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Force rounded corners during layoutId animations */
  .force-rounded {
    border-radius: 1.5rem !important;
    -webkit-border-radius: 1.5rem !important;
  }
  
  /* Mobile-specific responsive helpers */
  @media (max-width: 640px) {
    /* Ensure proper mobile font sizes */
    .mobile-text-base {
      font-size: 16px !important;
    }
    
    /* Enhanced touch targets */
    .mobile-touch-target {
      min-height: 48px !important;
      min-width: 48px !important;
    }
    
    /* Better mobile spacing */
    .mobile-padding {
      padding: 1rem !important;
    }
    
    /* Prevent horizontal overflow */
    .mobile-no-overflow {
      overflow-x: hidden !important;
      max-width: 100vw !important;
    }
    
    /* Card stack on mobile */
    .mobile-stack {
      display: flex !important;
      flex-direction: column !important;
      gap: 1rem !important;
    }
    
    /* Improve readability */
    .mobile-readable {
      line-height: 1.6 !important;
      letter-spacing: 0.01em !important;
    }
    
    /* Mobile-friendly gradients */
    .mobile-gradient-fix {
      background-attachment: scroll !important;
    }
  }
  
  /* Touch feedback for interactive elements */
  @media (hover: none) and (pointer: coarse) {
    .touch-feedback:active {
      transform: scale(0.95);
      opacity: 0.9;
    }
    
    /* Remove hover effects on touch devices */
    .touch-no-hover:hover {
      transform: none !important;
    }
  }

  /* Mobile Modal Optimization */
  @media (max-width: 640px) {
    .mobile-modal {
      height: 100vh !important;
      width: 100vw !important;
      border-radius: 0 !important;
      max-height: none !important;
      margin: 0 !important;
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
    }
    
    .mobile-modal-content {
      height: 100% !important;
      display: flex !important;
      flex-direction: column !important;
      overflow: hidden !important;
    }
    
    .mobile-modal-scrollable {
      flex: 1 !important;
      overflow-y: auto !important;
      -webkit-overflow-scrolling: touch !important;
      overscroll-behavior: contain !important;
    }
    
    .mobile-modal-footer {
      flex-shrink: 0 !important;
      padding-bottom: env(safe-area-inset-bottom) !important;
    }
  }

  /* 🌀 EPIC HUD ANIMATIONS FOR IRON MAN RADIAL MENU */
  @keyframes bounce-in {
    0% {
      transform: scale(0) rotate(180deg);
      opacity: 0;
    }
    50% {
      transform: scale(1.3) rotate(90deg);
      opacity: 0.8;
    }
    80% {
      transform: scale(0.9) rotate(10deg);
      opacity: 1;
    }
    100% {
      transform: scale(1) rotate(0deg);
      opacity: 1;
    }
  }

  @keyframes hud-glow {
    0%, 100% {
      box-shadow: 0 0 20px rgba(139, 92, 246, 0.4), 0 0 40px rgba(139, 92, 246, 0.2);
    }
    50% {
      box-shadow: 0 0 40px rgba(139, 92, 246, 0.8), 0 0 80px rgba(139, 92, 246, 0.4);
    }
  }

  @keyframes arc-entrance {
    0% {
      transform: scale(0) translate(-50px, 50px) rotate(-90deg);
      opacity: 0;
    }
    60% {
      transform: scale(1.2) translate(0, 0) rotate(15deg);
      opacity: 0.9;
    }
    100% {
      transform: scale(1) translate(0, 0) rotate(0deg);
      opacity: 1;
    }
  }

  .animate-bounce-in {
    animation: bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  .animate-hud-glow {
    animation: hud-glow 2s ease-in-out infinite;
  }

  .animate-arc-entrance {
    animation: arc-entrance 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  /* 🔥 EPIC HAMBURGER → X MORPHING ANIMATIONS */
  .hamburger-line {
    transform-origin: center;
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    left: 50%;
    transform: translateX(-50%);
  }

  /* Top line: moves to center and rotates 45° */
  .hamburger-line-1 {
    transform: translateX(-50%) translateY(0) rotate(0deg);
  }

  .hamburger-line-1.open {
    transform: translateX(-50%) translateY(5px) rotate(45deg);
  }

  /* Middle line: fades out with scale effect */
  .hamburger-line-2 {
    opacity: 1;
    transform: translateX(-50%) scaleX(1);
  }

  .hamburger-line-2.open {
    opacity: 0;
    transform: translateX(-50%) scaleX(0);
  }

  /* Bottom line: moves to center and rotates -45° */
  .hamburger-line-3 {
    transform: translateX(-50%) translateY(0) rotate(0deg);
  }

  .hamburger-line-3.open {
    transform: translateX(-50%) translateY(-5px) rotate(-45deg);
  }

  /* 💥 EPIC PURPLE CIRCLE POP + MORPH ANIMATIONS */
  .morph-circle {
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    transform: scale(1) rotate(0deg);
    position: relative;
    overflow: visible;
  }

  .morph-circle.open {
    transform: scale(1.1) rotate(180deg);
    box-shadow: 
      0 0 20px rgba(239, 68, 68, 0.8), 
      0 0 40px rgba(239, 68, 68, 0.6),
      0 0 80px rgba(239, 68, 68, 0.3);
  }


  /* Continuous pulse effect for open state */
  .morph-pulse {
    animation: epic-pulse 2s ease-in-out infinite;
  }

  @keyframes epic-pulse {
    0%, 100% {
      box-shadow: 
        0 0 20px rgba(239, 68, 68, 0.6), 
        0 0 40px rgba(239, 68, 68, 0.4);
    }
    50% {
      box-shadow: 
        0 0 30px rgba(239, 68, 68, 1), 
        0 0 60px rgba(239, 68, 68, 0.8),
        0 0 100px rgba(239, 68, 68, 0.4);
    }
  }
}